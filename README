Νικόλαος Βλάχος
1115201400023


>Compilation:

make για compile
make clean για διαγραφή του εκτελέσιμου


>Run:

./minisearch -i [INPUT_FILE] -k MaxResults

Το -k MaxResults είναι optional με default τιμή 10.


>Εντολές:

/df
/df term
/tf docid term
/search term1 term2 ... term10
/exit


>Επιλογές/Παραδοχές:

- Η κύρια δομή μου είναι η searchIndex, που περιέχει ένα documentMap και ένα
trie. Στο documentMap αποθηκευω τα documents αφού διαβαστούν, καθώς και άλλες
πληροφορίες για αυτά ( πλήθος λέξεων κάθε κειμένου, μέσος αριθμός λέξεων, πληθος
κειμένων ). Το trie είναι το inverted index.

- Για την αποθήκευση των χαρακτηρών των λέξεων στο trie, χρησιμοποιώ μια
linked list, που φροντίζω να παραμένει πάντα ταξινομημένη σε αύξουσα σειρά
και της οποίας ο κάθε κόμβος περιέχει τον χαρακτήρα που του αντιστοιχεί, έναν
δείκτη στο posting list του ( αν έχει ) καθώς και ένα δείκτη στην κεφαλή της
λίστας του επόμενου επιπέδου ( αν υπάρχει )

- Για την αποθήκευση της posting list χρησιμοποιώ μια linked list που κάθε
κόμβος της περιέχει το docID ενός κειμένου και πόσες φορές εμφανίζεται η λέξη
στην οποία αντιστοιχεί το posting list σε αυτό το κείμενο. Στην κεφαλή της
posting list αποθηκεύω το πλήθος των κειμένων στην οποία εμφανίζεται η λέξη.
Η posting list φροντίζω να είναι πάντα ταξινομημένη σε φθίνουσα σειρά (κατα
docID ) για γρηγορότερες εισαγωγές, μιας και διαβάζω τα κείμενα κατά αύξον docID

- Για την υλοποίηση της "/df 'term'" , απλώς αναζητώ το term στο inverted index
βρίσκω το posting list της και επιστρέφω το document frequency του ( που είναι
αποθηκευμένο στην κεφαλή της posting list)

- Για την υλοποίηση της "/df" χρησιμοποιώ μια αναδρομική συνάρτηση την οποία
καλώ για την κεφαλή μιας λίστας του trie, η οποία εξετάζει κάθε character node
της λίστας. Αν υπάρχει πιο κάτω επίπεδο από αυτο το node, η συνάρτηση καλείται
αναδρομικά για τον απόγονο του character node. Αν επίσης το character node
περιέχει posting list ( είναι το τέλος μιας λέξης ), εκτυπώνεται αυτή η λέξη.
Το τελευταίο γίνεται με τη βοήθεια μιας στοίβας η οποία περιέχει τους χαρακτήρες
των nodes των προηγούμενων κλήσεων της αναδρομής. Έτσι αποθηκέυεται ένα μονοπάτι
χαρακτήρων που περιέχει τη λέξη που αντιστοιχεί σε κάθε κόμβο.

- Για την υλοποίηση της "/tf docID tern", αναζητώ το term στο inverted index,
βρίσκω το posting list του και αναζητώ σε αυτο κόμβο με docid=docID. Αν το βρώ,
επιστρέφω το πλήθος τον εμφανίσεων του term στο document ( αποθηκευμένο στην
posting list ), αλλιώς είναι 0.


- Σχετικά με την υλοποίηση της "/search":

-- Κάνω merge τα posting lists των terms σε μια λίστα, η οποία περιέχει τα
docIDs των κειμένων στα οποία εμφανίζεται τουλάχιστον ένα από τα terms

-- Από αυτήν την λίστα δημιουργώ έναν πίνακα που περιέχει το docID κάθε κειμένου
μαζί με το score του ( υπολογισμένο σύμφωνα με τον τύπο της εκφώνησης ).
Στη συνέχεια, κάνω quicksort αυτόν τον πίνακα με βάση το score, κατά φθίνουσα
σειρά και επιλέγω τα MaxResults πρώτα ( ή όλα αν είναι λιγότερα ) για εκτύπωση.


- Σχετικά με την εκτυπώση των αποτελεσμάτων του search:

-- Διατρέχω κάθε κείμενο, αναζητώντας σε αυτό τα searchterms. Έπειτα κρατάω τα
τμήματα που πρέπει να υπογραμμιστούν. Αυτό το κάνω με τη βοήθεια της λίστας
underlineList. Σε κάθε node της λίστας κρατάω έναν αριθμό που υποδηλώνει το
πλήθος των χαρακτήρων ' ' ή '^' που πρέπει να εκτυπωθούν. Το πλήθος αυτό σε
συνεχόμενα nodes εκφράζει εναλασσόμενα τους 2 χαρακτήρες, με μια μεταβλητή στην
κεφαλή της λίστας να καθορίζει ποιόν χαρακτήρα θα εκφράζει ο πρώτος κόμβος. Π.χ.
άν η κεφαλή περιέχει τιμή 1, ο πρώτος κόμβος 5, ο δέυτερος 10 και ο τρίτος 3,
τότε θα εκτυπωθούν 5 '^', 10 ' ' και 3 '^'. Για τιμή 0 στην κεφαλή θα ήταν
5 ' ', 10 '^' και 3 ' ', κοκ.

-- Εκτυπώνω γραμμή-γραμμή κάθε κείμενο, εκτυπώνοντας πρίν τη 1η γραμμή ένα
header που περιέχει το docID και το score του κειμένου και αφήνοντας πριν όλες τις
άλλες γραμμες κενό ίσο σε μήκος με το header, ώστε οι γραμμές να είναι
ευθυγραμμισμένες. Μετά απο κάθε γραμμή, χρησιμοποιώ το underlineList για να
εκτυπώσω είτε κενά είτε '^', ώστε τα searchterms να είναι πάνω από '^'.

-- Αν μια λέξη δε χωράει ολόκληρη στη γραμμή, την εκτυπώνω στην επόμενη.
